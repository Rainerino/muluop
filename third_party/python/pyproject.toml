[project]
name = "muluop"
version = "1.0.0"
requires-python = ">=3.11"
dependencies = [
    # torch moved to extras so we can choose cpu vs cuda index
    "eclipse-ecal>=6.0.1",
    "numpy>=2.0.0",
    "hydra-core>=1.3.0",
    "eclipse-zenoh>=1.7.1",
    "pynng>=0.8.1",
    "pyzmq>=27.1.0",
    "iceoryx2>=0.7.0",
    "grpcio>=1.76.0",
]

[project.optional-dependencies]
# Choose one of these:
cpu = [
    "torch==2.9.1",
]
cu128 = [
    "torch==2.9.1",
]

sim = [
    "mujoco",
]
compute = [
    "scipy",
    "opencv-python",
    "opencv-contrib-python",
    "matplotlib",
    "huggingface_hub",
    "open3d",
]
dev = [
    "pre-commit>=4.3.0",
    "pre-commit-hooks>=6.0.0",
    "mypy>=1.0.0",
    "ruff>=0.1.0",
    "pylint>=3.0.0",
    "pytest>=7.0.0",
    "jupyterlab>=4.5.1",
    "ipykernel>=7.1.0",
    "ipywidgets>=8.1.8",
    "jupyterlab-widgets>=3.0.16",
    "matplotlib>=3.10.8",
    "ipympl>=0.9.8",
    "jupyterlab-git>=0.51.3",
    "jupyter-resource-usage>=1.2.0",
    "jupyterlab-lsp>=5.2.0",
    "jupyterlab-spellchecker>=0.8.4",
    "python-lsp-server[all]>=1.14.0",
    "jupyterlab-code-formatter>=3.0.2",
    "black>=25.12.0",
    "isort>=7.0.0",
    "ipython>=9.8.0",
]

[[tool.uv.index]]
name = "tsinghua"
url = "https://pypi.tuna.tsinghua.edu.cn/simple"
default = true

[[tool.uv.index]]
name = "simple"
url = "https://pypi.org/simple"

[[tool.uv.index]]
name = "pytorch-cu128"
url = "https://download.pytorch.org/whl/cu128"
explicit = true

[tool.uv.sources]
torch = { index = "pytorch-cu128" }
triton = { index = "pytorch-cu128" } # Try forcing Triton to come from PyTorch too
eclipse-ecal = { index = "simple" }

[tool.ruff]
line-length = 100
target-version = "py311"

[tool.ruff.lint]
select = ["E", "F", "I", "N", "W", "UP"]

[tool.mypy]
python_version = "3.11"
warn_return_any = true
warn_unused_configs = true
ignore_missing_imports = true
